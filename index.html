<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Lemon&family=Libre+Baskerville:wght@400;700&family=Montserrat:wght@200;300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="shortcut icon" href="/favicon/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="/css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="/fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="/css/swiper-bundle.min.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <title>SineFlick</title>
  </head>
  <style>
    .light-mode {
      background-color: #f5f5f5;
      color: #000 !important;
    }
    .light-mode h1 {
      color: #000 !important;
    }
    .light-mode .footer-container {
      background-color: #f5f5f5;
      color: #000 !important;
    }

    .light-mode h3 {
      color: #000 !important;
    }

    .light-mode footer {
      background-color: #f5f5f5;
      color: #000 !important;
    }

    .light-mode .subs-content h3 {
      color: #fff !important;
    }

    .light-mode .dropdown-menu {
      background-color: #f5f5f5;
    }

    .light-mode .dropdown-menu a {
      color: #000 !important;
    }

    .light-mode .dropdown-menu a:hover {
      background-color: #e7e5e5 !important;
      color: var(--pink) !important;
    }

    /* Hide dropdown menu by default */
    .dropdown-menu {
      display: none;
    }

    /* Show dropdown menu when hovering over dropdown-select */
    .dropdown:hover .dropdown-menu {
      display: block;
    }

    /* Style the dropdown menu */
    .dropdown-menu {
      position: absolute;
      background-color: var(--comment-box);
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
      z-index: 1;
    }

    .dropdown-menu a {
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    .dropdown-menu a:hover {
      background-color: var(--comment);
    }

    .dropdown-select {
      cursor: pointer;
      color: #fff;
      font-size: 1.15rem;
      font-weight: 600;
      transition: color 0.25s ease-in-out;
      -webkit-transition: color 0.25s ease-in-out;
      -moz-transition: color 0.25s ease-in-out;
      -ms-transition: color 0.25s ease-in-out;
      -o-transition: color 0.25s ease-in-out;
    }

    .dropdown-select:hover {
      color: var(--pink);
    }
  </style>
  <body>
    <!-- Navbar -->
    <div class="container">
      <header class="header">
        <div class="header-logo-container">
          <img
            src="/img/logo/logo-transparent.png"
            class="header-logo"
            alt="SineFlick"
          />
        </div>
        <nav class="navBar">
          <div class="open-btn" id="open">
            <i class="fa-solid fa-bars"></i>
          </div>
          <div class="nav-items">
            <ul class="list">
              <li><a href="/index.html">Home</a></li>
              <li><a href="/pages/movies.html">Movies</a></li>
              <li><a href="/pages/tvSeries.html">TV Series</a></li>
              <li><a href="/pages/animatedMovies.html">Animated Movies</a></li>
              <!-- dropdown genre -->
              <li class="dropdown">
                <div class="dropdown-select">
                  Genre <i class="fa fa-caret-down"></i>
                </div>
                <div class="dropdown-menu">
                  <a href="/pages/categories.html#action">Action</a>
                  <a href="/pages/categories.html#comedy">Comedy</a>
                  <a href="/pages/categories.html#crime">Crime</a>
                  <a href="/pages/categories.html#sciFi">Sci-Fi</a>
                  <a href="/pages/categories.html#thriller">Thriller</a>
                </div>
              </li>
              <li><a href="/pages/myList.html">My List</a></li>
              <div class="close-btn" id="close">
                <i class="fa-solid fa-xmark"></i>
              </div>
            </ul>
            <div>
              <ul class="user">
                <li>
                  <i
                    class="fa-solid fa-magnifying-glass"
                    onclick="openSearch()"
                  ></i>
                </li>
                <ul class="auth-btn" id="auth-btn">
                  <li>
                    <a href="/pages/signup.html" class="btn-2">Signup</a>
                  </li>
                  <li><a href="/pages/login.html" class="btn-1">Login</a></li>
                </ul>
                <!-- Light Mode -->
                <li>
                  <i
                    class="fa-solid fa-moon"
                    id="light-mode"
                    onclick="lightMode()"
                  ></i>
                </li>
              </ul>
            </div>
          </div>
          <div id="myOverlay" class="overlay">
            <span class="closebtn" onclick="closeSearch()" title="Close Overlay"
              >Ã—</span
            >
            <div class="overlay-content">
              <form action="/pages/searchMovie.html" method="get">
                <input
                  type="text"
                  name="query"
                  id="searchInput"
                  placeholder="Search.."
                  onkeyup="getSearchSuggestions(this.value)"
                />
                <div id="searchSuggestions"></div>
                <button
                  type="submit"
                  class="btn-1 search-button"
                  style="border-radius: 0; height: auto"
                >
                  <i class="fa fa-search"></i>
                </button>
              </form>
            </div>
          </div>
        </nav>
      </header>
    </div>

    <!-- Slider Hero Section -->
    <div class="swiper mySwiper">
      <div class="swiper-wrapper" id="heroSection"></div>
    </div>

    <!-- New releases -->
    <div class="slider-container">
      <div class="slider-content">
        <h1>New Releases</h1>
      </div>
      <div class="owl-container">
        <div id="owl-new-releases" class="owl-carousel owl-theme"></div>
      </div>
    </div>

    <!-- Movies -->
    <div class="movies">
      <div class="movies-title">
        <h1>Movies</h1>
      </div>
      <div class="movies-ctg">
        <div class="ctg-1" id="genreButtons"></div>
      </div>

      <div class="movies-card" id="movieContainer"></div>
      <div class="button-more" style="margin-top: 20px">
        <a href="/pages/movies.html" class="btn-1">
          <span>Discover More&nbsp;</span>
          <i class="fa-regular fa-compass"></i>
        </a>
      </div>
    </div>

    <!-- TV Series -->
    <div class="slider-container">
      <div class="slider-content">
        <h1>TV Series</h1>
      </div>
      <div class="owl-container">
        <div id="owl-tv-series" class="owl-carousel owl-theme"></div>
      </div>
    </div>

    <!-- Animated Movies -->
    <div class="slider-container">
      <div class="slider-content">
        <h1>Animated Movies</h1>
      </div>
      <div class="owl-container">
        <div id="owl-animated-movies" class="owl-carousel owl-theme"></div>
      </div>
    </div>

    <!-- Subscribe -->
    <div class="subscribe">
      <div class="subs-content">
        <h3>
          Subscribe to the newsletter and be the first to know about new
          releases of your favourite TV series and movies
        </h3>
      </div>
      <div class="subs-btn">
        <input type="email" class="email" placeholder="Your email address..." />
        <input type="button" value="Subscribe now" class="input-btn" />
      </div>
    </div>

    <footer id="footer">
      <div class="footer-container">
        <div>
          <img
            src="/img/logo/logo-text.png"
            class="footer-logo"
            alt="SineFlick logo"
          />
          <p class="footer-text">
            we provide the latest movies and TV shows for you, enjoy scrolling
          </p>
          <div class="contact-info">
            <h3 class="footer-title">Contact Info</h3>
            <ul class="footer-link">
              <li>
                <i class="fa fa-map-marker-alt"></i>
                <span>Cibiru, Bandung</span>
              </li>
              <li>
                <i class="fa fa-phone-alt"></i>
                <span>+123-456-7890</span>
              </li>
            </ul>
          </div>
        </div>
        <div>
          <h3 class="footer-title">Useful Links</h3>
          <ul class="footer-link">
            <li><a href="/index.html">> Home</a></li>
            <li><a href="/pages/movies.html">> Movies</a></li>
            <li><a href="/pages/myList.html">> My List</a></li>
            <li><a href="/pages/contactUs.html">> Contact Us</a></li>
            <li><a href="/pages/about.html">> About</a></li>
          </ul>
        </div>
        <div>
          <h3 class="footer-title">Our Services</h3>
          <ul class="footer-link">
            <li><a href="/pages/services.html">Latest Movies</a></li>
            <li><a href="/pages/services.html">24 Hours Services</a></li>
            <li><a href="/pages/services.html">Free Access</a></li>
            <li><a href="/pages/services.html">Access TV show</a></li>
            <li><a href="/pages/services.html">Condition of Use</a></li>
          </ul>
        </div>
        <div>
          <h3 class="footer-title">Categories</h3>
          <ul class="footer-link">
            <li><a href="/pages/categories.html#action">> Action</a></li>
            <li><a href="/pages/categories.html#comedy">> Comedy</a></li>
            <li><a href="/pages/categories.html#crime">> Crime</a></li>
            <li><a href="/pages/categories.html#sciFi">> Sci-Fi</a></li>
            <li><a href="/pages/categories.html#thriller">> Thriller</a></li>
          </ul>
        </div>
        <div>
          <h3 class="footer-title">Support for you</h3>
          <ul class="footer-link">
            <li><a href="/pages/help.html">Help Center</a></li>
            <li><a href="/pages/support.html">Support</a></li>
            <li><a href="/pages/faq.html">FAQ & Terms</a></li>
          </ul>
        </div>
      </div>
    </footer>

    <script src="/js/jquery-3.7.1.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/swiper-bundle.min.js"></script>
    <script src="/js/main.js"></script>
    <script>
      function lightMode() {
        var element = document.body;
        element.classList.toggle("light-mode");

        // change icon
        var icon = document.getElementById("light-mode");
        if (icon.classList.contains("fa-moon")) {
          icon.classList.remove("fa-moon");
          icon.classList.add("fa-sun");
        } else {
          icon.classList.remove("fa-sun");
          icon.classList.add("fa-moon");
        }
      }

      // Fetch data from data.json
      fetch("/js/data/data.json")
        .then((response) => response.json())
        .then((data) => {
          const heroSection = document.getElementById("heroSection");
          let number = 1;

          // Filter out only the items with type "HeroSection"
          const heroSectionItems = data.items.filter(
            (item) => item.type === "HeroSection"
          );

          // Loop through each item in the filtered data
          heroSectionItems.forEach((item) => {
            // Create a swiper-slide element
            const swiperSlide = document.createElement("div");
            swiperSlide.classList.add("swiper-slide", `slide-${number++}`);

            // Construct HTML structure dynamically based on item data
            swiperSlide.innerHTML = `
        <div class="swiper-container">
          <div class="type">
            ${item.genre
              .map((genre) => `<p>${genre}</p><div class="line"></div>`)
              .join("")}
          </div>
          <div class="movie-title">
            <h2>${item.title}</h2>
            <p>${item.description}</p>
          </div>
          <div class="movie-rating">
            <div>
              <p>IMDb: ${item.rating}</p>
            </div>
            <div>
              <p>${item.time}</p>
            </div>
            <div class="rect">
              <p>${item.age}</p>
            </div>
          </div>
          <div class="movie-btn">
            <button class="btn-1">
              <i class="fa-regular fa-play-circle"></i> Watch Trailer
            </button>
            ${
              localStorage.getItem("myList") &&
              JSON.parse(localStorage.getItem("myList")).find(
                (itemL) => itemL === item.id
              )
                ? `<button class="btn-1 addToListButton" id="hs-${item.id}" onclick="addToList(this,'${item.id}')"><i class="fa-regular fa-bookmark"></i> Remove from My List</button>`
                : `<button class="btn-2 addToListButton" id="hs-${item.id}" onclick="addToList(this,'${item.id}')"><i class="fa-regular fa-bookmark"></i> Add to My List</button>`
            }
          </div>
        </div>
      `;

            // Append the constructed swiper-slide to heroSection
            heroSection.appendChild(swiperSlide);
          });

          // Initialize Swiper after data population
          const swiper = new Swiper(".swiper-container", {
            // Add Swiper options here
            loop: true,
            pagination: {
              el: ".swiper-pagination",
              clickable: true,
            },
          });
        })
        .catch((error) => console.error("Error fetching data:", error));

      function addToList(btn, id) {
        // add to localStroage
        let myList = localStorage.getItem("myList")
          ? JSON.parse(localStorage.getItem("myList"))
          : [];

        if (myList.find((item) => item === id)) {
          myList = myList.filter((item) => item !== id);
          localStorage.setItem("myList", JSON.stringify(myList));
          console.log("Removed from My List");
        } else {
          myList.push(id);
          localStorage.setItem("myList", JSON.stringify(myList));
          console.log("Added to My List");
        }

        // change button
        const addToListButton = document.querySelector("#" + btn.id);
        if (myList.find((item) => item === id)) {
          addToListButton.innerHTML = `<i class="fa-regular fa-bookmark"></i> Remove from My List`;
          addToListButton.classList.remove("btn-2");
          addToListButton.classList.add("btn-1");
        } else {
          addToListButton.innerHTML = `<i class="fa-regular fa-bookmark"></i> Add to My List`;
          addToListButton.classList.remove("btn-1");
          addToListButton.classList.add("btn-2");
        }
      }
    </script>
  </body>
</html>
